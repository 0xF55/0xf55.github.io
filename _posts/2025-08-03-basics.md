---
layout: post
title: "Python For Offensive Security Basics Part"
date: 2025-08-03
categories: [Intro]
---


# Basics

### System & Files 

- In this part we will use these libraries.

```python
import sys,os,subprocess,shutil
```

[sys](https://docs.python.org/3/library/sys.html)

- Library allows you to interact with the Python interpreter we can use it to:
* handle command-line arguments
* managing i/o
* exit from the program

First we need to know what is command line arguments ?
its a value passed to the program when executing it:

```bash
python3 script.py val1 val2 val3
```
We can access these values using:
```python
script = sys.argv[0] # programe name
val1 = sys.argv[1] 
val2 = sys.argv[2]
```
sys.argv is a list that conatins all the arguments

- this is another usages

```python
try:
    ip = sys.argv[1]
    port = sys.argv[2]
except IndexError:
    print("Usage: python script.py <ip> <port>
```

```python
sys.stdout.write("Hello World") # like print
sys.stderr.write("[!] Error ...") # print to stderr
sys.exit(0) # exit from the program
```

[subprocess](https://docs.python.org/3/library/subprocess.html)
- allows you to run external commands and programs from your Python code.

- Examples:

```python
cmd = 'powershell -ep bypass -c Write-Host "Hello World"' # Command to execute
cmd2 = 'python -m http.server 8080'
subprocess.run(cmd) # The Execution will stop until it ends
subprocess.Popen(cmd2,stdout=subprocess.DEVNULL) # Background Process
result = subprocess.check_output(cmd,text=True) # result = "Hello World"
```
[os](https://docs.python.org/3/library/os.html)

- provides a way to interact with the operating system.
- It allows you to perform common tasks like managing files and directories
- working with environment variables, and executing system commands

- Useful Examples:

```python
os_name = os.name # "nt" if windows "posix" if linux
currdir = os.getcwd() # Get Current Directory
files = os.listdir() # return list with files,dirs in current or specific dir
partitions = os.listdrives() # ['C:\\','D:\\'....]
env_vars = os.getenv("TEMP") # Env Variables C:\Users\...\AppData\Local\Temp
os.system("clear") # execute command
os.popen("any code") # background process
os.mkdir("NewDir") # make directory
os.chdir("Downloads") # change Directory
os.rename("old.txt","new.txt") # rename file
os.remove("file.txt") # remove file
os.rmdir("temporary") # remove empty directory
os.chmod("new.txt",777) # change file privilages
if os.path.exists("path"): pass # check if path exists
if os.path.isfile("path"): pass # check is file
if os.path.isdir("path"): pass # check if is directory
size = os.path.getsize("new.txt") # get file size (bytes)
full_path = os.path.join("C:\\Windows","System32\\calc.exe") # Merge two pathes
file_name = os.path.basename(full_path) # calc.exe
dir_path = os.path.dirname(full_path) # C:\Windows\System32
```

- That was the most used functions in os module

[shutil](https://docs.python.org/3/library/shutil.html)

this module offers collection of files,directories functions

- Example:

```python
shutil.copy(src_path,dst_path) # copy file
shutil.copy2(src_path,dst_path) # copy file with metadata
shutil.move(src,dst) # Recursively move a file or directory
shutil.rmtree(path) # remove a directory with all content
```

### Strings and log parsing

- Json Handle

```python
import json

data = '{"name":"0xf55","ip":"127.0.0.1"}'
json_data = json.loads(data) # parsed data
print(json_data["name"]) # get  name
print(json_data["ip"]) # get  ip

# Exporting Data to file
with open("data.json","w") as f:
    json.dump(json_data,f,indent=4)

# Load json data from file
with open("data.json","r") as r:
    json_from_file = json.load(r)
    print(json_from_file)
    print(json_from_file["name"])
```
- Output: 
```bash
0xf55
127.0.0.1
{'name': '0xf55', 'ip': '127.0.0.1'}
0xf55
```
